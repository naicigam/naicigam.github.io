<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.2">Jekyll</generator><link href="https://finanzascodificadas.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://finanzascodificadas.com/" rel="alternate" type="text/html" /><updated>2020-03-06T13:31:34-03:00</updated><id>https://finanzascodificadas.com/</id><title type="html">Finanzas Codificadas</title><subtitle>Code Jedi - Finance Padawan.</subtitle><author><name>Juan Manuel Alvarez</name></author><entry><title type="html">Trading algorítmico en MATba-ROFEX con .Net - Parte 1</title><link href="https://finanzascodificadas.com/posts/primary-net-part-1" rel="alternate" type="text/html" title="Trading algorítmico en MATba-ROFEX con .Net - Parte 1" /><published>2019-12-18T00:00:00-03:00</published><updated>2019-12-18T00:00:00-03:00</updated><id>https://finanzascodificadas.com/posts/primary-net-part-1</id><content type="html" xml:base="https://finanzascodificadas.com/posts/primary-net-part-1">&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/matba-rofex-logo.png&quot; alt=&quot;MATBa-ROFEX&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;introducción&quot;&gt;Introducción&lt;/h1&gt;

&lt;h2 id=&quot;el-mercado-algorítmico-argentino-y-rofex&quot;&gt;El mercado algorítmico argentino y ROFEX&lt;/h2&gt;

&lt;p&gt;En mercados altamente desarrollados, como el de Estados Unidos, el trading algorítmico viene creciendo exponencialmente en los últimos años. Su desarrollo ha sido notorio, desde 1995, cuando el trading fue oficialmente automatizado en el New York Stock Exchange, al 2017 cuando, según JP Morgan, el trading manual era solo del 10% en términos de volumen (Fuente: &lt;a href=&quot;https://www.cnbc.com/2017/06/13/death-of-the-human-investor-just-10-percent-of-trading-is-regular-stock-picking-jpmorgan-estimates.html&quot;&gt;CNBC&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Hoy en día países menos desarrollados como Brasil o India, ya cuentan con mercados automáticos, pero en Argentina todavía hay varios desafíos por delante, entre ellos: la liquidez, la tecnología, la estructura de mercado, la legislación y el atractivo para inversores extranjeros están todavía lejos de sus pares. Algunos ejemplos incluyen: el impuesto a la renta financiera, la falta de instrumentos y de liquidez para shortear posiciones, como así también la falta de interfaces de programación para comunicarse con los brokers. Estos dos últimos hacen que el único mercado propicio para este tipo de implementaciones en Argentina, sea el mercado de futuros de ROFEX, quien cuenta con dicha infraestructura.&lt;/p&gt;

&lt;h2 id=&quot;interfaces-de-programación&quot;&gt;Interfaces de programación&lt;/h2&gt;

&lt;p&gt;Para poder realizar una automatización utilizando un lenguaje de programación, es necesario contar con una interfaz de programación (API por sus siglas en inglés). De la misma forma que un usuario se comunica con un sistema a través de una interfaz de usuario, un programa se comunica con otro a través de una interfaz de programación.&lt;/p&gt;

&lt;p&gt;En noviembre de 2015, Primary, una empresa del grupo ROFEX, lanzó la primera interfaz de programación que permite automatizar la compra y venta de instrumentos de ROFEX, abriendo el camino para el desarrollo y ejecución de algoritmos de trading en dicho mercado.&lt;/p&gt;

&lt;h2 id=&quot;liquidez&quot;&gt;Liquidez&lt;/h2&gt;

&lt;p&gt;Según los informes, “la operatoria de derivados financieros en MATba-ROFEX durante el primer semestre del 2019 superó todos los registros previos. En los primeros seis meses del año, se negociaron 137 millones de contratos, un 48% superior al primer semestre de 2018” (Fuente &lt;a href=&quot;https://www.rofex.com.ar/data/investigacion/listado.asp?idcategoria=3&amp;amp;tipoart=2&quot;&gt;ROFEX&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/evolucion-operatoria.png&quot; alt=&quot;Operatoria derivados financieros&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;rofex-20&quot;&gt;ROFEX 20&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;El Índice de Acciones ROFEX 20 es un índice de retorno total, diseñado para medir el desempeño de una cartera integrada por las 20 acciones más líquidas en el mercado accionario local ponderadas por su capitalización bursátil. (Fuente: &lt;a href=&quot;https://www.rofex.com.ar/indiceROFEX20/&quot;&gt;ROFEX20&lt;/a&gt;).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;En Abril de 2018 la CNV aprobó el índice de acciones ROFEX20 (RFX20) y rápidamente se volvió uno de los productos más negociados de ROFEX, generando también una alternativa para quienes desean aplicar estrategias de trading algorítmico sobre un mercado derivado de acciones. De hecho, según los informes de ROFEX del primer semestre de 2019, “el total negociado de futuros y opciones del índice desde su listado alcanzó los 2,5 millones de contratos operados […] y se alcanzó un ratio promedio de 65% volumen operado en futuros y opciones en relación al volumen operado en el mercado spot”.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/nocional-futuro-vs-spot.png&quot; alt=&quot;Volumen nocional futuro vs. spot&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;primary--c--primarynet&quot;&gt;Primary + C# = Primary.Net&lt;/h1&gt;

&lt;p&gt;Primary.Net es una biblioteca para acceder a la API de Primary desde C#. Utiliza la API REST de Primary.&lt;/p&gt;

&lt;p&gt;Al momento de escribir este artículo, se encuentra todavía en desarrollo (versión 0.1.1-alpha) y tiene soporte para:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Lista de instrumentos operados.&lt;/li&gt;
  &lt;li&gt;Datos históricos.&lt;/li&gt;
  &lt;li&gt;Datos en tiempo real.&lt;/li&gt;
  &lt;li&gt;Cursar órdenes.&lt;/li&gt;
  &lt;li&gt;Información de órdenes en tiempo real.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El objetivo de esta serie es ir mostrando el uso de esta biblioteca, para poder hacer automatizaciones sobre el mercado de MATba-ROFEX.&lt;/p&gt;

&lt;h2 id=&quot;obtener-un-usuario-de-prueba&quot;&gt;Obtener un usuario de prueba&lt;/h2&gt;

&lt;p&gt;Para utilizar la API es necesario tener un usuario con quien autenticarnos. Nuestra ALyC nos va a proveer el usuario relacionado con nuestra cuenta comitente, pero no debemos hacer pruebas y desarrollar contra la cuenta que tiene dinero de verdad. Para estas etapas del proceso, se usa un usuario de prueba que opera con dinero ficticio, por eso se denomina &lt;strong&gt;paper trading&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;El usuario de prueba se obtiene registrándose en &lt;a href=&quot;https://remarkets.primary.ventures/&quot;&gt;reMarkets&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Para este artículo se asume que el usuario tiene experiencia en la creación de proyectos de C#, así que vamos directo a las particularidades.&lt;/p&gt;

&lt;h2 id=&quot;creación-del-proyecto&quot;&gt;Creación del proyecto&lt;/h2&gt;

&lt;p&gt;El paquete &lt;code class=&quot;highlighter-rouge&quot;&gt;Primary.Net&lt;/code&gt; se encuentra en Nuget.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/primary-net-nuget.png&quot; alt=&quot;Primary.Net en NuGet&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para que aparezca la versión actual de la biblioteca es necesario chequear que incluya los prereleases, ya que al momento de escribir este artículo, no hay todavía una versión release.&lt;/p&gt;

&lt;h2 id=&quot;autenticación&quot;&gt;Autenticación&lt;/h2&gt;

&lt;p&gt;Para autenticarse en la API, hay que primero crear una instancia del objeto &lt;code class=&quot;highlighter-rouge&quot;&gt;Api&lt;/code&gt; con el endponint del entorno al que queremos conectarnos. Primary.Net provee dos constantes: &lt;code class=&quot;highlighter-rouge&quot;&gt;DemoEndpoint&lt;/code&gt; y &lt;code class=&quot;highlighter-rouge&quot;&gt;ProductionEndpoint&lt;/code&gt;, para conectarse a las instancias de paper trading y produccion respectivamente.&lt;/p&gt;

&lt;p&gt;Luego se llama al método &lt;code class=&quot;highlighter-rouge&quot;&gt;Login&lt;/code&gt; utilizando como parámetros el usuario y el password.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DemoEndpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;obteniendo-los-instrumentos-negociados&quot;&gt;Obteniendo los instrumentos negociados&lt;/h2&gt;

&lt;p&gt;Para obtener la lista de instrumentos negociados, se utiliza el método &lt;code class=&quot;highlighter-rouge&quot;&gt;GetAllInstruments&lt;/code&gt;, que devuelve un conjunto de &lt;code class=&quot;highlighter-rouge&quot;&gt;Instrument&lt;/code&gt;, donde se encuentran el mercado y el símbolo de cada uno.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetAllInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instrument&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instrument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Market&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; / &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instrument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;La salida va a ser algo como esto:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ROFX / SOJ.ROSMay20M
ROFX / SOJ.ROSMay20 290c
ROFX / PISO.MAI.ROSAbr20 161c
ROFX / TRI.ROS 12/01 19
ROFX / PISO.MAI.ROSAbr20 173c
ROFX / PISO.MAI.ROSAbr20 185c
ROFX / TRI.MINJul20
ROFX / MERV - XMEV - AY24C - CI
ROFX / MAI.ROSJul20 168c
ROFX / SOJ.ROSEne20 229p
ROFX / PISO.SOJ.ROSMay20 230p
ROFX / GIR.ROSMar20
ROFX / TRI.ROSMar20 189p
ROFX / DONov19
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;filtrando-los-instrumentos-de-interés&quot;&gt;Filtrando los instrumentos de interés&lt;/h2&gt;

&lt;p&gt;Si quisiéramos filtrar por ejemplo, los futuros de dolar, podemos utilizar LINQ sobre dicha secuencia.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollarFutures&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;StartsWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DO&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                                                &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;StartsWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DOP &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollarFuture&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollarFutures&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dollarFuture&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;La salida de este ejemplo será algo como:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DONov19
DOMar20
DONov19 66.00c
DODic19
DOEne20A
DOJul20
DOMay20A
DONov19 68.00c
DOJun20A
DOJun20
DONov19 60.00p
DOAbr20
DOAgo20
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;obteniendo-los-trades-históricos-de-un-instrumento&quot;&gt;Obteniendo los trades históricos de un instrumento&lt;/h2&gt;

&lt;p&gt;Finalmente, para obtener datos históricos de un instrumento, utilizamos el método &lt;code class=&quot;highlighter-rouge&quot;&gt;GetHistoricalTrades&lt;/code&gt; que devuelve una secuencia de &lt;code class=&quot;highlighter-rouge&quot;&gt;Trade&lt;/code&gt; con la información de cada operación realizada.&lt;/p&gt;

&lt;p&gt;Los parámetros son: el instrumento y el intervalo de días para el cual queremos los datos.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sampleInstrument&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threeDaysAgo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Today&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetHistoricalTrades&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleInstrument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threeDaysAgo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Today&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToLocalTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;: $&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como la API de Primary devuelve las fechas y horas en UTC, es necesario convertirlos a fecha/hora local.&lt;/p&gt;

&lt;p&gt;La salida es:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;11/19/2019 10:30:48 AM: $60.35 (6.0)
11/19/2019 10:32:10 AM: $60.351 (1.0)
11/19/2019 10:59:42 AM: $60.39 (1.0)
11/19/2019 11:31:06 AM: $60.45 (1.0)
11/19/2019 11:34:15 AM: $60.5 (1.0)
11/19/2019 11:35:45 AM: $60.5 (20.0)
11/19/2019 11:43:17 AM: $60.51 (1.0)
11/19/2019 11:43:49 AM: $60.51 (1.0)
11/19/2019 11:48:15 AM: $60.55 (10.0)
11/19/2019 11:48:15 AM: $60.55 (30.0)
11/19/2019 11:48:15 AM: $60.55 (13.0)
11/19/2019 11:48:15 AM: $60.55 (13.0)
11/19/2019 11:49:49 AM: $60.55 (7.0)
11/19/2019 11:49:49 AM: $60.55 (7.0)
11/19/2019 12:01:34 PM: $60.55 (7.0)
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusiones&quot;&gt;Conclusiones&lt;/h1&gt;

&lt;p&gt;Primary.Net provee una forma de acceder a la API de Primary y a los productos de MATba-ROFEX desde C#. Si bien la biblioteca se encuentra todavía en desarrollo, la funcionalidad existente permite que sea utilizada para los casos de uso más comunes.&lt;/p&gt;

&lt;p&gt;En futuros artículos iremos desarrollando el resto de la funcionalidad disponible en la biblioteca y ejemplos de como utilizarla para implementar una estrategia de trading.&lt;/p&gt;

&lt;p&gt;Pueden encontrar más información de la Primary API en su &lt;a href=&quot;http://api.primary.com.ar/&quot;&gt;sitio oficial&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Para conocer más acerca de la biblioteca, se puede acceder al &lt;a href=&quot;https://github.com/naicigam/Primary.Net/&quot;&gt;repositorio de GitHub&lt;/a&gt; y a la &lt;a href=&quot;https://primary.naicigam.dev/&quot;&gt;documentación&lt;/a&gt;.&lt;/p&gt;</content><author><name>Juan Manuel Alvarez</name></author><summary type="html">Introducción El mercado algorítmico argentino y ROFEX En mercados altamente desarrollados, como el de Estados Unidos, el trading algorítmico viene creciendo exponencialmente en los últimos años. Su desarrollo ha sido notorio, desde 1995, cuando el trading fue oficialmente automatizado en el New York Stock Exchange, al 2017 cuando, según JP Morgan, el trading manual era solo del 10% en términos de volumen (Fuente: CNBC). Hoy en día países menos desarrollados como Brasil o India, ya cuentan con mercados automáticos, pero en Argentina todavía hay varios desafíos por delante, entre ellos: la liquidez, la tecnología, la estructura de mercado, la legislación y el atractivo para inversores extranjeros están todavía lejos de sus pares. Algunos ejemplos incluyen: el impuesto a la renta financiera, la falta de instrumentos y de liquidez para shortear posiciones, como así también la falta de interfaces de programación para comunicarse con los brokers. Estos dos últimos hacen que el único mercado propicio para este tipo de implementaciones en Argentina, sea el mercado de futuros de ROFEX, quien cuenta con dicha infraestructura. Interfaces de programación Para poder realizar una automatización utilizando un lenguaje de programación, es necesario contar con una interfaz de programación (API por sus siglas en inglés). De la misma forma que un usuario se comunica con un sistema a través de una interfaz de usuario, un programa se comunica con otro a través de una interfaz de programación. En noviembre de 2015, Primary, una empresa del grupo ROFEX, lanzó la primera interfaz de programación que permite automatizar la compra y venta de instrumentos de ROFEX, abriendo el camino para el desarrollo y ejecución de algoritmos de trading en dicho mercado. Liquidez Según los informes, “la operatoria de derivados financieros en MATba-ROFEX durante el primer semestre del 2019 superó todos los registros previos. En los primeros seis meses del año, se negociaron 137 millones de contratos, un 48% superior al primer semestre de 2018” (Fuente ROFEX). ROFEX 20 El Índice de Acciones ROFEX 20 es un índice de retorno total, diseñado para medir el desempeño de una cartera integrada por las 20 acciones más líquidas en el mercado accionario local ponderadas por su capitalización bursátil. (Fuente: ROFEX20). En Abril de 2018 la CNV aprobó el índice de acciones ROFEX20 (RFX20) y rápidamente se volvió uno de los productos más negociados de ROFEX, generando también una alternativa para quienes desean aplicar estrategias de trading algorítmico sobre un mercado derivado de acciones. De hecho, según los informes de ROFEX del primer semestre de 2019, “el total negociado de futuros y opciones del índice desde su listado alcanzó los 2,5 millones de contratos operados […] y se alcanzó un ratio promedio de 65% volumen operado en futuros y opciones en relación al volumen operado en el mercado spot”. Primary + C# = Primary.Net Primary.Net es una biblioteca para acceder a la API de Primary desde C#. Utiliza la API REST de Primary. Al momento de escribir este artículo, se encuentra todavía en desarrollo (versión 0.1.1-alpha) y tiene soporte para: Lista de instrumentos operados. Datos históricos. Datos en tiempo real. Cursar órdenes. Información de órdenes en tiempo real. El objetivo de esta serie es ir mostrando el uso de esta biblioteca, para poder hacer automatizaciones sobre el mercado de MATba-ROFEX. Obtener un usuario de prueba Para utilizar la API es necesario tener un usuario con quien autenticarnos. Nuestra ALyC nos va a proveer el usuario relacionado con nuestra cuenta comitente, pero no debemos hacer pruebas y desarrollar contra la cuenta que tiene dinero de verdad. Para estas etapas del proceso, se usa un usuario de prueba que opera con dinero ficticio, por eso se denomina paper trading. El usuario de prueba se obtiene registrándose en reMarkets. Para este artículo se asume que el usuario tiene experiencia en la creación de proyectos de C#, así que vamos directo a las particularidades. Creación del proyecto El paquete Primary.Net se encuentra en Nuget. Para que aparezca la versión actual de la biblioteca es necesario chequear que incluya los prereleases, ya que al momento de escribir este artículo, no hay todavía una versión release. Autenticación Para autenticarse en la API, hay que primero crear una instancia del objeto Api con el endponint del entorno al que queremos conectarnos. Primary.Net provee dos constantes: DemoEndpoint y ProductionEndpoint, para conectarse a las instancias de paper trading y produccion respectivamente. Luego se llama al método Login utilizando como parámetros el usuario y el password. var api = new Api(Api.DemoEndpoint); await api.Login(&quot;user&quot;, &quot;password&quot;); Obteniendo los instrumentos negociados Para obtener la lista de instrumentos negociados, se utiliza el método GetAllInstruments, que devuelve un conjunto de Instrument, donde se encuentran el mercado y el símbolo de cada uno. var allIInstruments = await api.GetAllInstruments(); foreach (var instrument in allIInstruments) { Console.WriteLine($&quot;{instrument.Market} / {instrument.Symbol}&quot;); } La salida va a ser algo como esto: ROFX / SOJ.ROSMay20M ROFX / SOJ.ROSMay20 290c ROFX / PISO.MAI.ROSAbr20 161c ROFX / TRI.ROS 12/01 19 ROFX / PISO.MAI.ROSAbr20 173c ROFX / PISO.MAI.ROSAbr20 185c ROFX / TRI.MINJul20 ROFX / MERV - XMEV - AY24C - CI ROFX / MAI.ROSJul20 168c ROFX / SOJ.ROSEne20 229p ROFX / PISO.SOJ.ROSMay20 230p ROFX / GIR.ROSMar20 ROFX / TRI.ROSMar20 189p ROFX / DONov19 ... Filtrando los instrumentos de interés Si quisiéramos filtrar por ejemplo, los futuros de dolar, podemos utilizar LINQ sobre dicha secuencia. var dollarFutures = allIInstruments.Where( s =&amp;gt; s.Symbol.StartsWith(&quot;DO&quot;) &amp;amp;&amp;amp; !s.Symbol.StartsWith(&quot;DOP &quot;) ); foreach (var dollarFuture in dollarFutures) { Console.WriteLine($&quot;{dollarFuture.Symbol}&quot;); } La salida de este ejemplo será algo como: DONov19 DOMar20 DONov19 66.00c DODic19 DOEne20A DOJul20 DOMay20A DONov19 68.00c DOJun20A DOJun20 DONov19 60.00p DOAbr20 DOAgo20 ... Obteniendo los trades históricos de un instrumento Finalmente, para obtener datos históricos de un instrumento, utilizamos el método GetHistoricalTrades que devuelve una secuencia de Trade con la información de cada operación realizada. Los parámetros son: el instrumento y el intervalo de días para el cual queremos los datos. var sampleInstrument = allIInstruments.First(); var threeDaysAgo = DateTime.Today.AddDays(-3); foreach (var trade in await api.GetHistoricalTrades(sampleInstrument, threeDaysAgo, DateTime.Today)) { Console.WriteLine($&quot;{trade.DateTime.ToLocalTime()}: ${trade.Price} ({trade.Size})&quot;); } Como la API de Primary devuelve las fechas y horas en UTC, es necesario convertirlos a fecha/hora local. La salida es: 11/19/2019 10:30:48 AM: $60.35 (6.0) 11/19/2019 10:32:10 AM: $60.351 (1.0) 11/19/2019 10:59:42 AM: $60.39 (1.0) 11/19/2019 11:31:06 AM: $60.45 (1.0) 11/19/2019 11:34:15 AM: $60.5 (1.0) 11/19/2019 11:35:45 AM: $60.5 (20.0) 11/19/2019 11:43:17 AM: $60.51 (1.0) 11/19/2019 11:43:49 AM: $60.51 (1.0) 11/19/2019 11:48:15 AM: $60.55 (10.0) 11/19/2019 11:48:15 AM: $60.55 (30.0) 11/19/2019 11:48:15 AM: $60.55 (13.0) 11/19/2019 11:48:15 AM: $60.55 (13.0) 11/19/2019 11:49:49 AM: $60.55 (7.0) 11/19/2019 11:49:49 AM: $60.55 (7.0) 11/19/2019 12:01:34 PM: $60.55 (7.0) ... Conclusiones Primary.Net provee una forma de acceder a la API de Primary y a los productos de MATba-ROFEX desde C#. Si bien la biblioteca se encuentra todavía en desarrollo, la funcionalidad existente permite que sea utilizada para los casos de uso más comunes. En futuros artículos iremos desarrollando el resto de la funcionalidad disponible en la biblioteca y ejemplos de como utilizarla para implementar una estrategia de trading. Pueden encontrar más información de la Primary API en su sitio oficial. Para conocer más acerca de la biblioteca, se puede acceder al repositorio de GitHub y a la documentación.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://finanzascodificadas.com/images/tech-header.png" /></entry></feed>