<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.7.2">Jekyll</generator><link href="https://finanzascodificadas.com/feed.xml" rel="self" type="application/atom+xml" /><link href="https://finanzascodificadas.com/" rel="alternate" type="text/html" /><updated>2020-06-09T12:47:12-03:00</updated><id>https://finanzascodificadas.com/</id><title type="html">Finanzas Codificadas</title><subtitle>Code Jedi - Finance Padawan</subtitle><author><name>Juan Manuel Alvarez</name></author><entry><title type="html">Trading algorítmico en MATba-ROFEX con .Net - Parte 2</title><link href="https://finanzascodificadas.com/posts/primary-net-part-2" rel="alternate" type="text/html" title="Trading algorítmico en MATba-ROFEX con .Net - Parte 2" /><published>2020-06-09T00:00:00-03:00</published><updated>2020-06-09T00:00:00-03:00</updated><id>https://finanzascodificadas.com/posts/primary-net-part-2</id><content type="html" xml:base="https://finanzascodificadas.com/posts/primary-net-part-2">&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/matba-rofex-logo.png&quot; alt=&quot;MATBa-ROFEX&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://finanzascodificadas.com/posts/primary-net-part-1&quot;&gt;Parte 1: Introducción, instrumentos negociados y datos históricos.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Parte 2: Ordenes.&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Parte 3: Eventos y datos en tiempo real.&lt;/li&gt;
  &lt;li&gt;Parte 4: Ejemplo de una estrategia de trading.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;En la primera parte de esta serie presentamos Primary.Net y como acceder a la lista de instrumentos operados y sus datos históricos.
En esta segunda parte, vamos a ver como operar con órdenes.&lt;/p&gt;

&lt;h1 id=&quot;identificando-una-orden&quot;&gt;Identificando una orden&lt;/h1&gt;
&lt;p&gt;Las órdenes en Primary.Net están representadas por una jerarquía de tres clases:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-2/order-classes.png&quot; alt=&quot;Diagrama de clases&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;OrderId&lt;/code&gt;: Identifica a una orden.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Order&lt;/code&gt;: Contiene la información necesaria para ingresar una orden al mercado.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;OrderStatus&lt;/code&gt;: Contiene el estado de una orden enviada al mercado.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;enviando-una-orden&quot;&gt;Enviando una orden&lt;/h1&gt;
&lt;p&gt;Una orden en Primary.Net está representada por la clase &lt;code class=&quot;highlighter-rouge&quot;&gt;Order&lt;/code&gt;. Las propiedades básicas que tenemos que tener en cuenta son:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Instrument&lt;/code&gt;: Sobre que instrumento queremos operar.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Type&lt;/code&gt;: Si es una orden al precio de mercado y a un precio específico.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Side&lt;/code&gt;: Orden de compra o de venta.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Expiration&lt;/code&gt;: El tiempo de vida de la orden.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Quantity&lt;/code&gt;: La cantidad de instrumentos a operar.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Una vez creada la orden, se envia con el método &lt;code class=&quot;highlighter-rouge&quot;&gt;SubmitOrder&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Por ejemplo, así se enviaría una orden de compra por 100 contratos del futuro de dolar con vencimiento en julio 2020 al precio de mercado:&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DemoEndpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DemoUsername&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DemoPassword&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Order&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Instrument&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Instrument&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Market&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ROFX&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;DOJul20&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Expiration&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OrderExpiration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Quantity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OrderType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Market&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orderId&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;SubmitOrder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DemoAccount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;order&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orderId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClientId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; / &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orderId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Proprietary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;La salida va mostrar el identificador de la orden, por ejemplo:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;327697141000025 / PBCP
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Si quisíeramos cursar una orden con un precio límite, simplemente hay que cambiar el tipo y poner el precio:&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;order&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Order&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Instrument&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Instrument&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Market&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ROFX&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;DOJul20&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Expiration&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OrderExpiration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Day&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Quantity&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OrderType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Limit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Price&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;77.99&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;consultando-el-estado-de-una-orden&quot;&gt;Consultando el estado de una orden&lt;/h1&gt;

&lt;p&gt;Una vez enviada una orden, podemos consultar su estado utilizando el método &lt;code class=&quot;highlighter-rouge&quot;&gt;GetOrderStatus&lt;/code&gt;.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orderStatus&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetOrderStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orderId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orderStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; / &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;orderStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StatusText&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Si la orden fue correctamente cursada, se mostrará:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;New / Aceptada
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Si la orden fue rechazada, la propiedad &lt;code class=&quot;highlighter-rouge&quot;&gt;StatusText&lt;/code&gt; mostrará más información del motivo del rechazo, por ejemplo:&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Rejected / Saldo insuficiente
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Los estados posibles de la orden se encuentran en la enumeración &lt;code class=&quot;highlighter-rouge&quot;&gt;Status&lt;/code&gt; dentro del namespace &lt;code class=&quot;highlighter-rouge&quot;&gt;Primary.Data.Orders&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;ordenes-iceberg&quot;&gt;Ordenes iceberg&lt;/h1&gt;

&lt;p&gt;Para enviar una orden iceberg, hay tres propiedades que hay que tener en cuenta:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Iceberg&lt;/code&gt;: Debe ser &lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt; para identificar esta orden como una orden iceberg.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Quantity&lt;/code&gt;: La cantidad real que queremos operar.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;DisplayQuantity&lt;/code&gt;: La cantidad que queremos mostrar públicamente.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Una vez cursada la orden, podemos ver como se desarrolla la operación obteniendo la información de la orden con &lt;code class=&quot;highlighter-rouge&quot;&gt;GetOrderStatus&lt;/code&gt; y examinando las siguientes propiedades:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;LastQuantity&lt;/code&gt;: La última cantidad operada.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CumulativeQuantity&lt;/code&gt;: La cantidad operada desde que fue enviada la orden.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;LeavesQuantity&lt;/code&gt;: La cantidad que queda por operar.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;conclusiones&quot;&gt;Conclusiones&lt;/h1&gt;

&lt;p&gt;Pudiendo cursar órdenes al mercado, ya tenemos lo básico para implementar una estrategia de trading. 
En la próxima parte de esta serie, vamos a ver como responder a eventos y datos en tiempo real.&lt;/p&gt;

&lt;p&gt;Para conocer más acerca de la biblioteca, se puede acceder al &lt;a href=&quot;https://github.com/naicigam/Primary.Net/&quot;&gt;repositorio de GitHub&lt;/a&gt; y a la &lt;a href=&quot;https://finanzascodificadas.com/Primary.Net/&quot;&gt;documentación&lt;/a&gt;.&lt;/p&gt;</content><author><name>Juan Manuel Alvarez</name></author><summary type="html">Parte 1: Introducción, instrumentos negociados y datos históricos. Parte 2: Ordenes. Parte 3: Eventos y datos en tiempo real. Parte 4: Ejemplo de una estrategia de trading. En la primera parte de esta serie presentamos Primary.Net y como acceder a la lista de instrumentos operados y sus datos históricos. En esta segunda parte, vamos a ver como operar con órdenes. Identificando una orden Las órdenes en Primary.Net están representadas por una jerarquía de tres clases: OrderId: Identifica a una orden. Order: Contiene la información necesaria para ingresar una orden al mercado. OrderStatus: Contiene el estado de una orden enviada al mercado. Enviando una orden Una orden en Primary.Net está representada por la clase Order. Las propiedades básicas que tenemos que tener en cuenta son: Instrument: Sobre que instrumento queremos operar. Type: Si es una orden al precio de mercado y a un precio específico. Side: Orden de compra o de venta. Expiration: El tiempo de vida de la orden. Quantity: La cantidad de instrumentos a operar. Una vez creada la orden, se envia con el método SubmitOrder. Por ejemplo, así se enviaría una orden de compra por 100 contratos del futuro de dolar con vencimiento en julio 2020 al precio de mercado: var api = new Api(Api.DemoEndpoint); await api.Login(Api.DemoUsername, Api.DemoPassword); var order = new Order { Instrument = new Instrument { Market = &quot;ROFX&quot;, Symbol = &quot;DOJul20&quot; }, Expiration = OrderExpiration.Day, Quantity = 100, Type = OrderType.Market }; var orderId = await api.SubmitOrder(Api.DemoAccount, order); Console.WriteLine($&quot;{orderId.ClientId} / {orderId.Proprietary}&quot;); La salida va mostrar el identificador de la orden, por ejemplo: 327697141000025 / PBCP Si quisíeramos cursar una orden con un precio límite, simplemente hay que cambiar el tipo y poner el precio: var order = new Order { Instrument = new Instrument { Market = &quot;ROFX&quot;, Symbol = &quot;DOJul20&quot; }, Expiration = OrderExpiration.Day, Quantity = 100, Type = OrderType.Limit, Price = 77.99m }; Consultando el estado de una orden Una vez enviada una orden, podemos consultar su estado utilizando el método GetOrderStatus. var orderStatus = await _api.GetOrderStatus(orderId); Console.WriteLine($&quot;{orderStatus.Status} / {orderStatus.StatusText}&quot;); Si la orden fue correctamente cursada, se mostrará: New / Aceptada Si la orden fue rechazada, la propiedad StatusText mostrará más información del motivo del rechazo, por ejemplo: Rejected / Saldo insuficiente Los estados posibles de la orden se encuentran en la enumeración Status dentro del namespace Primary.Data.Orders. Ordenes iceberg Para enviar una orden iceberg, hay tres propiedades que hay que tener en cuenta: Iceberg: Debe ser true para identificar esta orden como una orden iceberg. Quantity: La cantidad real que queremos operar. DisplayQuantity: La cantidad que queremos mostrar públicamente. Una vez cursada la orden, podemos ver como se desarrolla la operación obteniendo la información de la orden con GetOrderStatus y examinando las siguientes propiedades: LastQuantity: La última cantidad operada. CumulativeQuantity: La cantidad operada desde que fue enviada la orden. LeavesQuantity: La cantidad que queda por operar. Conclusiones Pudiendo cursar órdenes al mercado, ya tenemos lo básico para implementar una estrategia de trading. En la próxima parte de esta serie, vamos a ver como responder a eventos y datos en tiempo real. Para conocer más acerca de la biblioteca, se puede acceder al repositorio de GitHub y a la documentación.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://finanzascodificadas.com/images/tech-header.png" /></entry><entry><title type="html">Programando Finanzas - Una guía de estudio</title><link href="https://finanzascodificadas.com/posts/programacion-finanzas" rel="alternate" type="text/html" title="Programando Finanzas - Una guía de estudio" /><published>2020-03-16T00:00:00-03:00</published><updated>2020-03-16T00:00:00-03:00</updated><id>https://finanzascodificadas.com/posts/programacion-finanzas</id><content type="html" xml:base="https://finanzascodificadas.com/posts/programacion-finanzas">&lt;blockquote&gt;
  &lt;p&gt;Aprendé programación orientada a finanzas, a tu ritmo y usando contenido online curado y organizado.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Te dedicás a finanzas y hace rato que venís mirando de costado el tema de programación, ya sea porque querés hacer tus propios bots de trading o porque querés procesar datos financieros y te está quedando chico el Excel.&lt;/p&gt;

&lt;p&gt;¿No te gustaría que hubiera una carrera universitaria orientada a eso específicamente?&lt;/p&gt;

&lt;p&gt;Acá no vas a recibir un título, pero sí vas a tener el material necesario para aprender Programación Orientada a Finanzas por tu cuenta y gratis.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;El objetivo es usar solo recursos online y (en lo posible) gratis, cosa de no tener excusas.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;preguntas-frecuentes&quot;&gt;Preguntas frecuentes&lt;/h1&gt;

&lt;blockquote&gt;
  &lt;p&gt;Antes de empezar, seteamos algunas expectativas.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;por-qué-se-ve-python-y-no-r-o-julia&quot;&gt;¿Por qué se ve Python y no R o Julia?&lt;/h2&gt;

&lt;p&gt;Porque había que elegir uno y es con el que mejor me llevo. Sin embargo, estos tres lenguajes (y mucho más) son idóneos para la tarea. El lenguaje de programación es una herramienta. El objetivo no tiene que ser solo aprender Python, o R, o Julia, sino poder aprender los fundamentos utilizando cualquier lenguaje.&lt;/p&gt;

&lt;h2 id=&quot;por-qué-cursos-online&quot;&gt;¿Por qué cursos online?&lt;/h2&gt;

&lt;p&gt;Los cursos online ofrecen muy buenas ventajas:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Son desarrollados y dictados por docentes que se dedican al tema.&lt;/li&gt;
  &lt;li&gt;La mayoría tiene una institución atrás que los avala y, si querés, podés pedir certificado.&lt;/li&gt;
  &lt;li&gt;Hay miles de alumnos cursándolos a la vez, así que nunca falta gente a quien preguntarle o que se encontró con los mismos problemas que uno.&lt;/li&gt;
  &lt;li&gt;Se actualizan y se corrigen constantemente.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Mi objetivo es ir eligiendo y organizando aquellos que ofrecen lo necesario para cada etapa de la carrera.&lt;/p&gt;

&lt;h2 id=&quot;hay-material-para-meses-de-estudio-hay-que-hacer-todos-los-cursos&quot;&gt;Hay material para meses de estudio. ¿Hay que hacer todos los cursos?&lt;/h2&gt;

&lt;p&gt;Para nada. Acá nadie vigila, ni corrige. Podés saltear y hacer los cursos como quieras. Es por eso que a cada uno intento ponerle una pequeña descripción que indique el nivel de conocimiento necesario y los objetivos principales.&lt;/p&gt;

&lt;p&gt;Sin embargo, para hacer una comparación: ¿cuántos conocimientos de ingeniería se necesitan para…&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;… construir un puente?&lt;/li&gt;
  &lt;li&gt;… construir un edificio?&lt;/li&gt;
  &lt;li&gt;… construir una casa?&lt;/li&gt;
  &lt;li&gt;… cambiar una ventana?&lt;/li&gt;
  &lt;li&gt;… aceitar la puerta que hace ruido?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El desarrollo de software es una disciplina que evoluciona constantemente y nunca se aprende completa. La profundidad va a depender de lo que cada persona quiera hacer.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Ahora sí. A aprender!&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;contenido&quot;&gt;Contenido&lt;/h1&gt;

&lt;p&gt;Antes de empezar, ¿no sabés si la programación es para vos? Mirate &lt;a href=&quot;https://twitter.com/JohnGalt_is_www/status/1210981218768044033&quot;&gt;este hilo de @JohnGalt_is_www&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;fundamentos-de-programación&quot;&gt;Fundamentos de programación&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/computational-thinking-problem-solving&quot;&gt;Computational Thinking for Problem Solving&lt;/a&gt;: Todos dicen que hay que aprender Python, pero los lenguajes de programación son simplemente una herramienta. En este curso vas a aprender como encarar problemas para resolverlos utilizando programación. Y también vas a aprender Python.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/python-data&quot;&gt;Python Data Structures&lt;/a&gt;: Ya conocés las estructuras de control. Acá vas a empezar a trabajar con texto, listas, diccionarios y otras estructuras de datos.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;(Opcional)&lt;/strong&gt; &lt;a href=&quot;https://github.com/zhiwehu/Python-programming-exercises/blob/master/100%2B%20Python%20challenging%20programming%20exercises.txt&quot;&gt;Ejercicios de práctica&lt;/a&gt;: Si querés practicar más Python y no se te ocurren ejercicios, acá hay unos cuantos.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.udemy.com/course/git-started-with-github/&quot;&gt;Getting Started with Github&lt;/a&gt;: Ya empezaste a programar tus proyectos y cada vez que querés hacer una copia de seguridad o compartirlo, creás un ZIP o subís el código a Dropbox. En este curso, vas a aprender lo básico de como los desarrolladores versionan y comparten código.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/python-statistics-financial-analysis&quot;&gt;Python and Statistics for Financial Analysis&lt;/a&gt;: Ya sabés algo de programación y querés aprender un poco más, pero esta vez resolviendo problemas de finanzas.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;(Optativa)&lt;/strong&gt; &lt;a href=&quot;https://www.coursera.org/learn/learning-how-to-learn&quot;&gt;Learning How to - Learn: Powerful mental tools to help you master tough subjects&lt;/a&gt;: No siempre tenemos el tiempo que nos gustaría para dedicarle a aprender programación (o cualquier otra cosa). En este curso vas a aprender recursos para optimizar tu estudio y aprendizaje de cualquier disciplina.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;visualización-y-análisis-de-datos&quot;&gt;Visualización y análisis de datos&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/python-data-analysis&quot;&gt;Introduction to Data Science in Python&lt;/a&gt;: Las finanzas cuantitativas son una aplicación de la ciencia de datos. En este curso vas a empezar a usar Pandas para operar con datos. Si sos fanático del Excel, vas a amar Pandas. Sino, también.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://github.com/ajcr/100-pandas-puzzles/blob/master/100-pandas-puzzles.ipynb&quot;&gt;101 Pandas puzzles&lt;/a&gt;: Muchos ejercicios prácticos para aprender más Pandas. (&lt;a href=&quot;https://github.com/ajcr/100-pandas-puzzles/blob/master/100-pandas-puzzles-with-solutions.ipynb&quot;&gt;Acá están las soluciones&lt;/a&gt;).&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;a href=&quot;https://www.coursera.org/learn/python-plotting&quot;&gt;Applied Plotting, Charting &amp;amp; Data Representation in Python&lt;/a&gt;: En este curso vas a aprender a hacer todo tipo de gráficos: barras, series de tiempo, histogramas y más.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;(Optativa)&lt;/strong&gt; &lt;a href=&quot;https://www.coursera.org/learn/python-network-data&quot;&gt;Using Python to Access Web Data&lt;/a&gt;: Si querés trabajar con datos que están en páginas o servicios web.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;(Optativa)&lt;/strong&gt; &lt;a href=&quot;https://www.coursera.org/learn/python-databases&quot;&gt;Using Databases with Python&lt;/a&gt;: Si querés trabajar con datos que están en una base de datos.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;para-agregar&quot;&gt;Para agregar&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.coursera.org/learn/python-statistics-financial-analysis&lt;/li&gt;
  &lt;li&gt;https://learn.datacamp.com/courses/time-series-analysis-in-python&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;qué-sigue&quot;&gt;¿Qué sigue?&lt;/h1&gt;

&lt;p&gt;Hasta este punto hay material para entretenerse varios meses. Igual voy a estar agregando más contenido y actualizando la guía, así que no dudes en suscribirte en &lt;a href=&quot;https://finanzascodificadas.com/feed.xml&quot;&gt;RSS&lt;/a&gt; o &lt;a href=&quot;https://twitter.com/AlvarezJuanDev&quot;&gt;Twitter&lt;/a&gt; para estar al tanto de las actualizaciones.&lt;/p&gt;

&lt;p&gt;No duden en enviar sugerencias!&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;actualizaciones&quot;&gt;Actualizaciones&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;2020-03-23: Agregadas las preguntas frecuentes.&lt;/li&gt;
&lt;/ul&gt;</content><author><name>Juan Manuel Alvarez</name></author><summary type="html">Aprendé programación orientada a finanzas, a tu ritmo y usando contenido online curado y organizado. Te dedicás a finanzas y hace rato que venís mirando de costado el tema de programación, ya sea porque querés hacer tus propios bots de trading o porque querés procesar datos financieros y te está quedando chico el Excel. ¿No te gustaría que hubiera una carrera universitaria orientada a eso específicamente? Acá no vas a recibir un título, pero sí vas a tener el material necesario para aprender Programación Orientada a Finanzas por tu cuenta y gratis. El objetivo es usar solo recursos online y (en lo posible) gratis, cosa de no tener excusas. Preguntas frecuentes Antes de empezar, seteamos algunas expectativas. ¿Por qué se ve Python y no R o Julia? Porque había que elegir uno y es con el que mejor me llevo. Sin embargo, estos tres lenguajes (y mucho más) son idóneos para la tarea. El lenguaje de programación es una herramienta. El objetivo no tiene que ser solo aprender Python, o R, o Julia, sino poder aprender los fundamentos utilizando cualquier lenguaje. ¿Por qué cursos online? Los cursos online ofrecen muy buenas ventajas: Son desarrollados y dictados por docentes que se dedican al tema. La mayoría tiene una institución atrás que los avala y, si querés, podés pedir certificado. Hay miles de alumnos cursándolos a la vez, así que nunca falta gente a quien preguntarle o que se encontró con los mismos problemas que uno. Se actualizan y se corrigen constantemente. Mi objetivo es ir eligiendo y organizando aquellos que ofrecen lo necesario para cada etapa de la carrera. Hay material para meses de estudio. ¿Hay que hacer todos los cursos? Para nada. Acá nadie vigila, ni corrige. Podés saltear y hacer los cursos como quieras. Es por eso que a cada uno intento ponerle una pequeña descripción que indique el nivel de conocimiento necesario y los objetivos principales. Sin embargo, para hacer una comparación: ¿cuántos conocimientos de ingeniería se necesitan para… … construir un puente? … construir un edificio? … construir una casa? … cambiar una ventana? … aceitar la puerta que hace ruido? El desarrollo de software es una disciplina que evoluciona constantemente y nunca se aprende completa. La profundidad va a depender de lo que cada persona quiera hacer. Ahora sí. A aprender! Contenido Antes de empezar, ¿no sabés si la programación es para vos? Mirate este hilo de @JohnGalt_is_www. Fundamentos de programación Computational Thinking for Problem Solving: Todos dicen que hay que aprender Python, pero los lenguajes de programación son simplemente una herramienta. En este curso vas a aprender como encarar problemas para resolverlos utilizando programación. Y también vas a aprender Python. Python Data Structures: Ya conocés las estructuras de control. Acá vas a empezar a trabajar con texto, listas, diccionarios y otras estructuras de datos. (Opcional) Ejercicios de práctica: Si querés practicar más Python y no se te ocurren ejercicios, acá hay unos cuantos. Getting Started with Github: Ya empezaste a programar tus proyectos y cada vez que querés hacer una copia de seguridad o compartirlo, creás un ZIP o subís el código a Dropbox. En este curso, vas a aprender lo básico de como los desarrolladores versionan y comparten código. Python and Statistics for Financial Analysis: Ya sabés algo de programación y querés aprender un poco más, pero esta vez resolviendo problemas de finanzas. (Optativa) Learning How to - Learn: Powerful mental tools to help you master tough subjects: No siempre tenemos el tiempo que nos gustaría para dedicarle a aprender programación (o cualquier otra cosa). En este curso vas a aprender recursos para optimizar tu estudio y aprendizaje de cualquier disciplina. Visualización y análisis de datos Introduction to Data Science in Python: Las finanzas cuantitativas son una aplicación de la ciencia de datos. En este curso vas a empezar a usar Pandas para operar con datos. Si sos fanático del Excel, vas a amar Pandas. Sino, también. 101 Pandas puzzles: Muchos ejercicios prácticos para aprender más Pandas. (Acá están las soluciones). Applied Plotting, Charting &amp;amp; Data Representation in Python: En este curso vas a aprender a hacer todo tipo de gráficos: barras, series de tiempo, histogramas y más. (Optativa) Using Python to Access Web Data: Si querés trabajar con datos que están en páginas o servicios web. (Optativa) Using Databases with Python: Si querés trabajar con datos que están en una base de datos. Para agregar https://www.coursera.org/learn/python-statistics-financial-analysis https://learn.datacamp.com/courses/time-series-analysis-in-python ¿Qué sigue? Hasta este punto hay material para entretenerse varios meses. Igual voy a estar agregando más contenido y actualizando la guía, así que no dudes en suscribirte en RSS o Twitter para estar al tanto de las actualizaciones. No duden en enviar sugerencias! Actualizaciones 2020-03-23: Agregadas las preguntas frecuentes.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://finanzascodificadas.com/images/finance-header.png" /></entry><entry><title type="html">Trading algorítmico en MATba-ROFEX con .Net - Parte 1</title><link href="https://finanzascodificadas.com/posts/primary-net-part-1" rel="alternate" type="text/html" title="Trading algorítmico en MATba-ROFEX con .Net - Parte 1" /><published>2019-12-18T00:00:00-03:00</published><updated>2019-12-18T00:00:00-03:00</updated><id>https://finanzascodificadas.com/posts/primary-net-part-1</id><content type="html" xml:base="https://finanzascodificadas.com/posts/primary-net-part-1">&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/matba-rofex-logo.png&quot; alt=&quot;MATBa-ROFEX&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Parte 1: Introducción, instrumentos negociados y datos históricos.&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://finanzascodificadas.com/posts/primary-net-part-2&quot;&gt;Parte 2: Ordenes.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Parte 3: Eventos y datos en tiempo real.&lt;/li&gt;
  &lt;li&gt;Parte 4: Ejemplo de una estrategia de trading.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;introducción&quot;&gt;Introducción&lt;/h1&gt;

&lt;h2 id=&quot;el-mercado-algorítmico-argentino-y-rofex&quot;&gt;El mercado algorítmico argentino y ROFEX&lt;/h2&gt;

&lt;p&gt;En mercados altamente desarrollados, como el de Estados Unidos, el trading algorítmico viene creciendo exponencialmente en los últimos años. Su desarrollo ha sido notorio, desde 1995, cuando el trading fue oficialmente automatizado en el New York Stock Exchange, al 2017 cuando, según JP Morgan, el trading manual era solo del 10% en términos de volumen (Fuente: &lt;a href=&quot;https://www.cnbc.com/2017/06/13/death-of-the-human-investor-just-10-percent-of-trading-is-regular-stock-picking-jpmorgan-estimates.html&quot;&gt;CNBC&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Hoy en día países menos desarrollados como Brasil o India, ya cuentan con mercados automáticos, pero en Argentina todavía hay varios desafíos por delante, entre ellos: la liquidez, la tecnología, la estructura de mercado, la legislación y el atractivo para inversores extranjeros están todavía lejos de sus pares. Algunos ejemplos incluyen: el impuesto a la renta financiera, la falta de instrumentos y de liquidez para shortear posiciones, como así también la falta de interfaces de programación para comunicarse con los brokers. Estos dos últimos hacen que el único mercado propicio para este tipo de implementaciones en Argentina, sea el mercado de futuros de ROFEX, quien cuenta con dicha infraestructura.&lt;/p&gt;

&lt;h2 id=&quot;interfaces-de-programación&quot;&gt;Interfaces de programación&lt;/h2&gt;

&lt;p&gt;Para poder realizar una automatización utilizando un lenguaje de programación, es necesario contar con una interfaz de programación (API por sus siglas en inglés). De la misma forma que un usuario se comunica con un sistema a través de una interfaz de usuario, un programa se comunica con otro a través de una interfaz de programación.&lt;/p&gt;

&lt;p&gt;En noviembre de 2015, Primary, una empresa del grupo ROFEX, lanzó la primera interfaz de programación que permite automatizar la compra y venta de instrumentos de ROFEX, abriendo el camino para el desarrollo y ejecución de algoritmos de trading en dicho mercado.&lt;/p&gt;

&lt;h2 id=&quot;liquidez&quot;&gt;Liquidez&lt;/h2&gt;

&lt;p&gt;Según los informes, “la operatoria de derivados financieros en MATba-ROFEX durante el primer semestre del 2019 superó todos los registros previos. En los primeros seis meses del año, se negociaron 137 millones de contratos, un 48% superior al primer semestre de 2018” (Fuente &lt;a href=&quot;https://www.rofex.com.ar/data/investigacion/listado.asp?idcategoria=3&amp;amp;tipoart=2&quot;&gt;ROFEX&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/evolucion-operatoria.png&quot; alt=&quot;Operatoria derivados financieros&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;rofex-20&quot;&gt;ROFEX 20&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;El Índice de Acciones ROFEX 20 es un índice de retorno total, diseñado para medir el desempeño de una cartera integrada por las 20 acciones más líquidas en el mercado accionario local ponderadas por su capitalización bursátil. (Fuente: &lt;a href=&quot;https://www.rofex.com.ar/indiceROFEX20/&quot;&gt;ROFEX20&lt;/a&gt;).&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;En Abril de 2018 la CNV aprobó el índice de acciones ROFEX20 (RFX20) y rápidamente se volvió uno de los productos más negociados de ROFEX, generando también una alternativa para quienes desean aplicar estrategias de trading algorítmico sobre un mercado derivado de acciones. De hecho, según los informes de ROFEX del primer semestre de 2019, “el total negociado de futuros y opciones del índice desde su listado alcanzó los 2,5 millones de contratos operados […] y se alcanzó un ratio promedio de 65% volumen operado en futuros y opciones en relación al volumen operado en el mercado spot”.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/nocional-futuro-vs-spot.png&quot; alt=&quot;Volumen nocional futuro vs. spot&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;primary--c--primarynet&quot;&gt;Primary + C# = Primary.Net&lt;/h1&gt;

&lt;p&gt;Primary.Net es una biblioteca para acceder a la API de Primary desde C#. Utiliza la API REST de Primary.&lt;/p&gt;

&lt;p&gt;Al momento de escribir este artículo, se encuentra todavía en desarrollo (versión 0.1.1-alpha) y tiene soporte para:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Lista de instrumentos operados.&lt;/li&gt;
  &lt;li&gt;Datos históricos.&lt;/li&gt;
  &lt;li&gt;Datos en tiempo real.&lt;/li&gt;
  &lt;li&gt;Cursar órdenes.&lt;/li&gt;
  &lt;li&gt;Información de órdenes en tiempo real.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;El objetivo de esta serie es ir mostrando el uso de esta biblioteca, para poder hacer automatizaciones sobre el mercado de MATba-ROFEX.&lt;/p&gt;

&lt;h2 id=&quot;obtener-un-usuario-de-prueba&quot;&gt;Obtener un usuario de prueba&lt;/h2&gt;

&lt;p&gt;Para utilizar la API es necesario tener un usuario con quien autenticarnos. Nuestra ALyC nos va a proveer el usuario relacionado con nuestra cuenta comitente, pero no debemos hacer pruebas y desarrollar contra la cuenta que tiene dinero de verdad. Para estas etapas del proceso, se usa un usuario de prueba que opera con dinero ficticio, por eso se denomina &lt;strong&gt;paper trading&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;El usuario de prueba se obtiene registrándose en &lt;a href=&quot;https://remarkets.primary.ventures/&quot;&gt;reMarkets&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Para este artículo se asume que el usuario tiene experiencia en la creación de proyectos de C#, así que vamos directo a las particularidades.&lt;/p&gt;

&lt;h2 id=&quot;creación-del-proyecto&quot;&gt;Creación del proyecto&lt;/h2&gt;

&lt;p&gt;El paquete &lt;code class=&quot;highlighter-rouge&quot;&gt;Primary.Net&lt;/code&gt; se encuentra en Nuget.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://finanzascodificadas.com/images/posts/primary-net-part-1/primary-net-nuget.png&quot; alt=&quot;Primary.Net en NuGet&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Para que aparezca la versión actual de la biblioteca es necesario chequear que incluya los prereleases, ya que al momento de escribir este artículo, no hay todavía una versión release.&lt;/p&gt;

&lt;h2 id=&quot;autenticación&quot;&gt;Autenticación&lt;/h2&gt;

&lt;p&gt;Para autenticarse en la API, hay que primero crear una instancia del objeto &lt;code class=&quot;highlighter-rouge&quot;&gt;Api&lt;/code&gt; con el endponint del entorno al que queremos conectarnos. Primary.Net provee dos constantes: &lt;code class=&quot;highlighter-rouge&quot;&gt;DemoEndpoint&lt;/code&gt; y &lt;code class=&quot;highlighter-rouge&quot;&gt;ProductionEndpoint&lt;/code&gt;, para conectarse a las instancias de paper trading y produccion respectivamente.&lt;/p&gt;

&lt;p&gt;Luego se llama al método &lt;code class=&quot;highlighter-rouge&quot;&gt;Login&lt;/code&gt; utilizando como parámetros el usuario y el password.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DemoEndpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Login&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;password&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;obteniendo-los-instrumentos-negociados&quot;&gt;Obteniendo los instrumentos negociados&lt;/h2&gt;

&lt;p&gt;Para obtener la lista de instrumentos negociados, se utiliza el método &lt;code class=&quot;highlighter-rouge&quot;&gt;GetAllInstruments&lt;/code&gt;, que devuelve un conjunto de &lt;code class=&quot;highlighter-rouge&quot;&gt;Instrument&lt;/code&gt;, donde se encuentran el mercado y el símbolo de cada uno.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetAllInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;instrument&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instrument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Market&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; / &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;instrument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;La salida va a ser algo como esto:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ROFX / SOJ.ROSMay20M
ROFX / SOJ.ROSMay20 290c
ROFX / PISO.MAI.ROSAbr20 161c
ROFX / TRI.ROS 12/01 19
ROFX / PISO.MAI.ROSAbr20 173c
ROFX / PISO.MAI.ROSAbr20 185c
ROFX / TRI.MINJul20
ROFX / MERV - XMEV - AY24C - CI
ROFX / MAI.ROSJul20 168c
ROFX / SOJ.ROSEne20 229p
ROFX / PISO.SOJ.ROSMay20 230p
ROFX / GIR.ROSMar20
ROFX / TRI.ROSMar20 189p
ROFX / DONov19
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;filtrando-los-instrumentos-de-interés&quot;&gt;Filtrando los instrumentos de interés&lt;/h2&gt;

&lt;p&gt;Si quisiéramos filtrar por ejemplo, los futuros de dolar, podemos utilizar LINQ sobre dicha secuencia.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollarFutures&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;Where&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;StartsWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DO&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                                                &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;StartsWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DOP &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollarFuture&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollarFutures&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dollarFuture&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;La salida de este ejemplo será algo como:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;DONov19
DOMar20
DONov19 66.00c
DODic19
DOEne20A
DOJul20
DOMay20A
DONov19 68.00c
DOJun20A
DOJun20
DONov19 60.00p
DOAbr20
DOAgo20
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;obteniendo-los-trades-históricos-de-un-instrumento&quot;&gt;Obteniendo los trades históricos de un instrumento&lt;/h2&gt;

&lt;p&gt;Finalmente, para obtener datos históricos de un instrumento, utilizamos el método &lt;code class=&quot;highlighter-rouge&quot;&gt;GetHistoricalTrades&lt;/code&gt; que devuelve una secuencia de &lt;code class=&quot;highlighter-rouge&quot;&gt;Trade&lt;/code&gt; con la información de cada operación realizada.&lt;/p&gt;

&lt;p&gt;Los parámetros son: el instrumento y el intervalo de días para el cual queremos los datos.&lt;/p&gt;

&lt;div class=&quot;language-c# highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sampleInstrument&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;allIInstruments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threeDaysAgo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Today&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;AddDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(-&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;api&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;GetHistoricalTrades&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sampleInstrument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;threeDaysAgo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Today&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;$&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DateTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;ToLocalTime&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;: $&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;)&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Como la API de Primary devuelve las fechas y horas en UTC, es necesario convertirlos a fecha/hora local.&lt;/p&gt;

&lt;p&gt;La salida es:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;11/19/2019 10:30:48 AM: $60.35 (6.0)
11/19/2019 10:32:10 AM: $60.351 (1.0)
11/19/2019 10:59:42 AM: $60.39 (1.0)
11/19/2019 11:31:06 AM: $60.45 (1.0)
11/19/2019 11:34:15 AM: $60.5 (1.0)
11/19/2019 11:35:45 AM: $60.5 (20.0)
11/19/2019 11:43:17 AM: $60.51 (1.0)
11/19/2019 11:43:49 AM: $60.51 (1.0)
11/19/2019 11:48:15 AM: $60.55 (10.0)
11/19/2019 11:48:15 AM: $60.55 (30.0)
11/19/2019 11:48:15 AM: $60.55 (13.0)
11/19/2019 11:48:15 AM: $60.55 (13.0)
11/19/2019 11:49:49 AM: $60.55 (7.0)
11/19/2019 11:49:49 AM: $60.55 (7.0)
11/19/2019 12:01:34 PM: $60.55 (7.0)
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;conclusiones&quot;&gt;Conclusiones&lt;/h1&gt;

&lt;p&gt;Primary.Net provee una forma de acceder a la API de Primary y a los productos de MATba-ROFEX desde C#. Si bien la biblioteca se encuentra todavía en desarrollo, la funcionalidad existente permite que sea utilizada para los casos de uso más comunes.&lt;/p&gt;

&lt;p&gt;En futuros artículos iremos desarrollando el resto de la funcionalidad disponible en la biblioteca y ejemplos de como utilizarla para implementar una estrategia de trading.&lt;/p&gt;

&lt;p&gt;Pueden encontrar más información de la Primary API en su &lt;a href=&quot;http://api.primary.com.ar/&quot;&gt;sitio oficial&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Para conocer más acerca de la biblioteca, se puede acceder al &lt;a href=&quot;https://github.com/naicigam/Primary.Net/&quot;&gt;repositorio de GitHub&lt;/a&gt; y a la &lt;a href=&quot;https://finanzascodificadas.com/Primary.Net/&quot;&gt;documentación&lt;/a&gt;.&lt;/p&gt;</content><author><name>Juan Manuel Alvarez</name></author><summary type="html">Parte 1: Introducción, instrumentos negociados y datos históricos. Parte 2: Ordenes. Parte 3: Eventos y datos en tiempo real. Parte 4: Ejemplo de una estrategia de trading. Introducción El mercado algorítmico argentino y ROFEX En mercados altamente desarrollados, como el de Estados Unidos, el trading algorítmico viene creciendo exponencialmente en los últimos años. Su desarrollo ha sido notorio, desde 1995, cuando el trading fue oficialmente automatizado en el New York Stock Exchange, al 2017 cuando, según JP Morgan, el trading manual era solo del 10% en términos de volumen (Fuente: CNBC). Hoy en día países menos desarrollados como Brasil o India, ya cuentan con mercados automáticos, pero en Argentina todavía hay varios desafíos por delante, entre ellos: la liquidez, la tecnología, la estructura de mercado, la legislación y el atractivo para inversores extranjeros están todavía lejos de sus pares. Algunos ejemplos incluyen: el impuesto a la renta financiera, la falta de instrumentos y de liquidez para shortear posiciones, como así también la falta de interfaces de programación para comunicarse con los brokers. Estos dos últimos hacen que el único mercado propicio para este tipo de implementaciones en Argentina, sea el mercado de futuros de ROFEX, quien cuenta con dicha infraestructura. Interfaces de programación Para poder realizar una automatización utilizando un lenguaje de programación, es necesario contar con una interfaz de programación (API por sus siglas en inglés). De la misma forma que un usuario se comunica con un sistema a través de una interfaz de usuario, un programa se comunica con otro a través de una interfaz de programación. En noviembre de 2015, Primary, una empresa del grupo ROFEX, lanzó la primera interfaz de programación que permite automatizar la compra y venta de instrumentos de ROFEX, abriendo el camino para el desarrollo y ejecución de algoritmos de trading en dicho mercado. Liquidez Según los informes, “la operatoria de derivados financieros en MATba-ROFEX durante el primer semestre del 2019 superó todos los registros previos. En los primeros seis meses del año, se negociaron 137 millones de contratos, un 48% superior al primer semestre de 2018” (Fuente ROFEX). ROFEX 20 El Índice de Acciones ROFEX 20 es un índice de retorno total, diseñado para medir el desempeño de una cartera integrada por las 20 acciones más líquidas en el mercado accionario local ponderadas por su capitalización bursátil. (Fuente: ROFEX20). En Abril de 2018 la CNV aprobó el índice de acciones ROFEX20 (RFX20) y rápidamente se volvió uno de los productos más negociados de ROFEX, generando también una alternativa para quienes desean aplicar estrategias de trading algorítmico sobre un mercado derivado de acciones. De hecho, según los informes de ROFEX del primer semestre de 2019, “el total negociado de futuros y opciones del índice desde su listado alcanzó los 2,5 millones de contratos operados […] y se alcanzó un ratio promedio de 65% volumen operado en futuros y opciones en relación al volumen operado en el mercado spot”. Primary + C# = Primary.Net Primary.Net es una biblioteca para acceder a la API de Primary desde C#. Utiliza la API REST de Primary. Al momento de escribir este artículo, se encuentra todavía en desarrollo (versión 0.1.1-alpha) y tiene soporte para: Lista de instrumentos operados. Datos históricos. Datos en tiempo real. Cursar órdenes. Información de órdenes en tiempo real. El objetivo de esta serie es ir mostrando el uso de esta biblioteca, para poder hacer automatizaciones sobre el mercado de MATba-ROFEX. Obtener un usuario de prueba Para utilizar la API es necesario tener un usuario con quien autenticarnos. Nuestra ALyC nos va a proveer el usuario relacionado con nuestra cuenta comitente, pero no debemos hacer pruebas y desarrollar contra la cuenta que tiene dinero de verdad. Para estas etapas del proceso, se usa un usuario de prueba que opera con dinero ficticio, por eso se denomina paper trading. El usuario de prueba se obtiene registrándose en reMarkets. Para este artículo se asume que el usuario tiene experiencia en la creación de proyectos de C#, así que vamos directo a las particularidades. Creación del proyecto El paquete Primary.Net se encuentra en Nuget. Para que aparezca la versión actual de la biblioteca es necesario chequear que incluya los prereleases, ya que al momento de escribir este artículo, no hay todavía una versión release. Autenticación Para autenticarse en la API, hay que primero crear una instancia del objeto Api con el endponint del entorno al que queremos conectarnos. Primary.Net provee dos constantes: DemoEndpoint y ProductionEndpoint, para conectarse a las instancias de paper trading y produccion respectivamente. Luego se llama al método Login utilizando como parámetros el usuario y el password. var api = new Api(Api.DemoEndpoint); await api.Login(&quot;user&quot;, &quot;password&quot;); Obteniendo los instrumentos negociados Para obtener la lista de instrumentos negociados, se utiliza el método GetAllInstruments, que devuelve un conjunto de Instrument, donde se encuentran el mercado y el símbolo de cada uno. var allIInstruments = await api.GetAllInstruments(); foreach (var instrument in allIInstruments) { Console.WriteLine($&quot;{instrument.Market} / {instrument.Symbol}&quot;); } La salida va a ser algo como esto: ROFX / SOJ.ROSMay20M ROFX / SOJ.ROSMay20 290c ROFX / PISO.MAI.ROSAbr20 161c ROFX / TRI.ROS 12/01 19 ROFX / PISO.MAI.ROSAbr20 173c ROFX / PISO.MAI.ROSAbr20 185c ROFX / TRI.MINJul20 ROFX / MERV - XMEV - AY24C - CI ROFX / MAI.ROSJul20 168c ROFX / SOJ.ROSEne20 229p ROFX / PISO.SOJ.ROSMay20 230p ROFX / GIR.ROSMar20 ROFX / TRI.ROSMar20 189p ROFX / DONov19 ... Filtrando los instrumentos de interés Si quisiéramos filtrar por ejemplo, los futuros de dolar, podemos utilizar LINQ sobre dicha secuencia. var dollarFutures = allIInstruments.Where( s =&amp;gt; s.Symbol.StartsWith(&quot;DO&quot;) &amp;amp;&amp;amp; !s.Symbol.StartsWith(&quot;DOP &quot;) ); foreach (var dollarFuture in dollarFutures) { Console.WriteLine($&quot;{dollarFuture.Symbol}&quot;); } La salida de este ejemplo será algo como: DONov19 DOMar20 DONov19 66.00c DODic19 DOEne20A DOJul20 DOMay20A DONov19 68.00c DOJun20A DOJun20 DONov19 60.00p DOAbr20 DOAgo20 ... Obteniendo los trades históricos de un instrumento Finalmente, para obtener datos históricos de un instrumento, utilizamos el método GetHistoricalTrades que devuelve una secuencia de Trade con la información de cada operación realizada. Los parámetros son: el instrumento y el intervalo de días para el cual queremos los datos. var sampleInstrument = allIInstruments.First(); var threeDaysAgo = DateTime.Today.AddDays(-3); foreach (var trade in await api.GetHistoricalTrades(sampleInstrument, threeDaysAgo, DateTime.Today)) { Console.WriteLine($&quot;{trade.DateTime.ToLocalTime()}: ${trade.Price} ({trade.Size})&quot;); } Como la API de Primary devuelve las fechas y horas en UTC, es necesario convertirlos a fecha/hora local. La salida es: 11/19/2019 10:30:48 AM: $60.35 (6.0) 11/19/2019 10:32:10 AM: $60.351 (1.0) 11/19/2019 10:59:42 AM: $60.39 (1.0) 11/19/2019 11:31:06 AM: $60.45 (1.0) 11/19/2019 11:34:15 AM: $60.5 (1.0) 11/19/2019 11:35:45 AM: $60.5 (20.0) 11/19/2019 11:43:17 AM: $60.51 (1.0) 11/19/2019 11:43:49 AM: $60.51 (1.0) 11/19/2019 11:48:15 AM: $60.55 (10.0) 11/19/2019 11:48:15 AM: $60.55 (30.0) 11/19/2019 11:48:15 AM: $60.55 (13.0) 11/19/2019 11:48:15 AM: $60.55 (13.0) 11/19/2019 11:49:49 AM: $60.55 (7.0) 11/19/2019 11:49:49 AM: $60.55 (7.0) 11/19/2019 12:01:34 PM: $60.55 (7.0) ... Conclusiones Primary.Net provee una forma de acceder a la API de Primary y a los productos de MATba-ROFEX desde C#. Si bien la biblioteca se encuentra todavía en desarrollo, la funcionalidad existente permite que sea utilizada para los casos de uso más comunes. En futuros artículos iremos desarrollando el resto de la funcionalidad disponible en la biblioteca y ejemplos de como utilizarla para implementar una estrategia de trading. Pueden encontrar más información de la Primary API en su sitio oficial. Para conocer más acerca de la biblioteca, se puede acceder al repositorio de GitHub y a la documentación.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://finanzascodificadas.com/images/tech-header.png" /></entry></feed>