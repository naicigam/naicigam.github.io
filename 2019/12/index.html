<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Finanzas Codificadas | Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</title>
<meta name="generator" content="Jekyll v3.7.2" />
<meta property="og:title" content="Finanzas Codificadas" />
<meta name="author" content="Juan Manuel Alvarez" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/2019/12/" />
<meta property="og:url" content="http://localhost:4000/2019/12/" />
<meta property="og:site_name" content="Finanzas Codificadas" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-01T00:00:00-03:00" />
<script type="application/ld+json">
{"description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","author":{"@type":"Person","name":"Juan Manuel Alvarez"},"@type":"BlogPosting","url":"http://localhost:4000/2019/12/","headline":"Finanzas Codificadas","dateModified":"2019-12-01T00:00:00-03:00","datePublished":"2019-12-01T00:00:00-03:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/12/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Finanzas Codificadas" />
  
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML'></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({displayAlign: "center", tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
</head>


  <body>

    <header class="site-header" role="banner">

<div class="header-metabar-wrapper__small">  
    <div class="header-metabar-wrapper-inner__small">  
        <a href="/" class="header-logo__small">
            <img class="header-logo" src="/images/logo-blanco-med.png" alt="Logo">
        </a>
        <div class="menu-header__small">
            <a href="/search" class="menu-header-item__small">
                <div class="glass-icon" type="button"><img src="/images/glass-icon-colored.svg"></div>
            </a>
        </div>
    </div>
</div>



<!--
  <div class="wrapper">
    
    
    <a class="site-title" rel="author" href="/">Finanzas Codificadas</a>

    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
          
            
            
            <a class="page-link" href="/about/">About</a>
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
        </div>
      </nav>
    
  </div>
-->
</header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="article-wrapper">

  <h1 class="section-page-title">Archive of posts from December 2019</h1>

  

	
      <div class="archive-box-wrapper">

        <div class="avatar_box mtb7">
            <div class="avatar_circle">
                
                  <img class="avatar-image" src="https://cdn-images-1.medium.com/fit/c/40/40/2*apMDbgYdLrbwDIRf6tjqyw.jpeg" alt="Author image">
                
            </div>
            <div class="post-meta brand-color-txt spacing1">Juan Manuel Alvarez</div>
            <div class="post-meta">2019-12-01</div>
        </div>


      	<h2 class="archive-post-title"><a href="/2019/12/18/primary-net-part-1">Trading algorítmico en MATba-ROFEX con .Net - Parte 1</a></h2>
      	<div class="prl15"><p><img src="https://finanzascodificadas.blob.core.windows.net/finanzascodificadas/posts/2019-11-22-primary-net-part-1/matba-rofex-logo.png" alt="MATBa-ROFEX" /></p>

<h1 id="introducción">Introducción</h1>

<h2 id="el-mercado-algorítmico-argentino-y-rofex">El mercado algorítmico argentino y ROFEX</h2>

<p>En mercados altamente desarrollados, como el de Estados Unidos, el trading algorítmico viene creciendo exponencialmente en los últimos años. Su desarrollo ha sido notorio, desde 1995, cuando el trading fue oficialmente automatizado en el New York Stock Exchange, al 2017 cuando, según JP Morgan, el trading manual era solo del 10% en términos de volumen (Fuente: <a href="https://www.cnbc.com/2017/06/13/death-of-the-human-investor-just-10-percent-of-trading-is-regular-stock-picking-jpmorgan-estimates.html">CNBC</a>).</p>

<p>Hoy en día países menos desarrollados como Brasil o India, ya cuentan con mercados automáticos, pero en Argentina todavía hay varios desafíos por delante, entre ellos: la liquidez, la tecnología, la estructura de mercado, la legislación y el atractivo para inversores extranjeros están todavía lejos de sus pares. Algunos ejemplos incluyen: el impuesto a la renta financiera, la falta de instrumentos y de liquidez para shortear posiciones, como así también la falta de interfaces de programación para comunicarse con los brokers. Estos dos últimos hacen que el único mercado propicio para este tipo de implementaciones en Argentina, sea el mercado de futuros de ROFEX, quien cuenta con dicha infraestructura.</p>

<h2 id="interfaces-de-programación">Interfaces de programación</h2>

<p>Para poder realizar una automatización utilizando un lenguaje de programación, es necesario contar con una interfaz de programación (API por sus siglas en inglés). De la misma forma que un usuario se comunica con un sistema a través de una interfaz de usuario, un programa se comunica con otro a través de una interfaz de programación.</p>

<p>En noviembre de 2015, Primary, una empresa del grupo ROFEX, lanzó la primera interfaz de programación que permite automatizar la compra y venta de instrumentos de ROFEX, abriendo el camino para el desarrollo y ejecución de algoritmos de trading en dicho mercado.</p>

<h2 id="liquidez">Liquidez</h2>

<p>Según los informes, “la operatoria de derivados financieros en MATba-ROFEX durante el primer semestre del 2019 superó todos los registros previos. En los primeros seis meses del año, se negociaron 137 millones de contratos, un 48% superior al primer semestre de 2018” (Fuente <a href="https://www.rofex.com.ar/data/investigacion/listado.asp?idcategoria=3&amp;tipoart=2">ROFEX</a>).</p>

<p><img src="https://finanzascodificadas.blob.core.windows.net/finanzascodificadas/posts/2019-11-22-primary-net-part-1/evolucion-operatoria.png" alt="Operatoria derivados financieros" /></p>

<h2 id="rofex-20">ROFEX 20</h2>

<blockquote>
  <p>El Índice de Acciones ROFEX 20 es un índice de retorno total, diseñado para medir el desempeño de una cartera integrada por las 20 acciones más líquidas en el mercado accionario local ponderadas por su capitalización bursátil. (Fuente: <a href="https://www.rofex.com.ar/indiceROFEX20/">ROFEX20</a>).</p>
</blockquote>

<p>En Abril de 2018 la CNV aprobó el índice de acciones ROFEX20 (RFX20) y rápidamente se volvió uno de los productos más negociados de ROFEX, generando también una alternativa para quienes desean aplicar estrategias de trading algorítmico sobre un mercado derivado de acciones. De hecho, según los informes de ROFEX del primer semestre de 2019, “el total negociado de futuros y opciones del índice desde su listado alcanzó los 2,5 millones de contratos operados […] y se alcanzó un ratio promedio de 65% volumen operado en futuros y opciones en relación al volumen operado en el mercado spot”.</p>

<p><img src="https://finanzascodificadas.blob.core.windows.net/finanzascodificadas/posts/2019-11-22-primary-net-part-1/nocional-futuro-vs-spot.png" alt="Volumen nocional futuro vs. spot" /></p>

<h1 id="primary--c--primarynet">Primary + C# = Primary.Net</h1>

<p>Primary.Net es una biblioteca para acceder a la API de Primary desde C#. Utiliza la API REST de Primary.</p>

<p>Al momento de escribir este artículo, se encuentra todavía en desarrollo (versión 0.1.1-alpha) y tiene soporte para:</p>

<ul>
  <li>Lista de instrumentos operados.</li>
  <li>Datos históricos.</li>
  <li>Datos en tiempo real.</li>
  <li>Cursar órdenes.</li>
  <li>Información de órdenes en tiempo real.</li>
</ul>

<p>El objetivo de esta serie es ir mostrando el uso de esta biblioteca, para poder hacer automatizaciones sobre el mercado de MATba-ROFEX.</p>

<h2 id="obtener-un-usuario-de-prueba">Obtener un usuario de prueba</h2>

<p>Para utilizar la API es necesario tener un usuario con quien autenticarnos. Nuestra ALyC nos va a proveer el usuario relacionado con nuestra cuenta comitente, pero no debemos hacer pruebas y desarrollar contra la cuenta que tiene dinero de verdad. Para estas etapas del proceso, se usa un usuario de prueba que no opera con dinero ficticio, por eso se denomina <strong>paper trading</strong>.</p>

<p>El usuario de prueba se obtiene registrándose en <a href="https://remarkets.primary.ventures/">reMarkets</a>.</p>

<p>Para este artículo se asume que el usuario tiene experiencia en la creación de proyectos de C#, así que vamos directo a las particularidades.</p>

<h2 id="creación-del-proyecto">Creación del proyecto</h2>

<p>El paquete <code class="highlighter-rouge">Primary.Net</code> se encuentra en Nuget.</p>

<p><img src="https://finanzascodificadas.blob.core.windows.net/finanzascodificadas/posts/2019-11-22-primary-net-part-1/primary-net-nuget.png" alt="Primary.Net en NuGet" /></p>

<p>Para que aparezca la versión actual de la biblioteca es necesario chequear que incluya los prereleases, ya que al momento de escribir este artículo, no hay todavía una versión release.</p>

<h2 id="autenticación">Autenticación</h2>

<p>Para autenticarse en la API, hay que primero crear una instancia del objeto <code class="highlighter-rouge">Api</code> con el endponint del entorno al que queremos conectarnos. Primary.Net provee dos constantes: <code class="highlighter-rouge">DemoEndpoint</code> y <code class="highlighter-rouge">ProductionEndpoint</code>, para conectarse a las instancias de paper trading y produccion respectivamente.</p>

<p>Luego se llama al método <code class="highlighter-rouge">Login</code> utilizando como parámetros el usuario y el password.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">api</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Api</span><span class="p">(</span><span class="n">Api</span><span class="p">.</span><span class="n">DemoEndpoint</span><span class="p">);</span>
<span class="k">await</span> <span class="n">api</span><span class="p">.</span><span class="nf">Login</span><span class="p">(</span><span class="s">"user"</span><span class="p">,</span> <span class="s">"password"</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="obteniendo-los-instrumentos-negociados">Obteniendo los instrumentos negociados</h2>

<p>Para obtener la lista de instrumentos negociados, se utiliza el método <code class="highlighter-rouge">GetAllInstruments</code>, que devuelve un conjunto de <code class="highlighter-rouge">Instrument</code>, donde se encuentran el mercado y el símbolo de cada uno.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">allIInstruments</span> <span class="p">=</span> <span class="k">await</span> <span class="n">api</span><span class="p">.</span><span class="nf">GetAllInstruments</span><span class="p">();</span>
<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">instrument</span> <span class="k">in</span> <span class="n">allIInstruments</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">instrument</span><span class="p">.</span><span class="n">Market</span><span class="p">}</span><span class="s"> / </span><span class="p">{</span><span class="n">instrument</span><span class="p">.</span><span class="n">Symbol</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>La salida va a ser algo como esto:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ROFX / SOJ.ROSMay20M
ROFX / SOJ.ROSMay20 290c
ROFX / PISO.MAI.ROSAbr20 161c
ROFX / TRI.ROS 12/01 19
ROFX / PISO.MAI.ROSAbr20 173c
ROFX / PISO.MAI.ROSAbr20 185c
ROFX / TRI.MINJul20
ROFX / MERV - XMEV - AY24C - CI
ROFX / MAI.ROSJul20 168c
ROFX / SOJ.ROSEne20 229p
ROFX / PISO.SOJ.ROSMay20 230p
ROFX / GIR.ROSMar20
ROFX / TRI.ROSMar20 189p
ROFX / DONov19
...
</code></pre></div></div>

<h2 id="filtrando-los-instrumentos-de-interés">Filtrando los instrumentos de interés</h2>

<p>Si quisiéramos filtrar por ejemplo, los futuros de dolar, podemos utilizar LINQ sobre dicha secuencia.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">dollarFutures</span> <span class="p">=</span> <span class="n">allIInstruments</span><span class="p">.</span><span class="nf">Where</span><span class="p">(</span> <span class="n">s</span> <span class="p">=&gt;</span> <span class="n">s</span><span class="p">.</span><span class="n">Symbol</span><span class="p">.</span><span class="nf">StartsWith</span><span class="p">(</span><span class="s">"DO"</span><span class="p">)</span> <span class="p">&amp;&amp;</span>
                                                <span class="p">!</span><span class="n">s</span><span class="p">.</span><span class="n">Symbol</span><span class="p">.</span><span class="nf">StartsWith</span><span class="p">(</span><span class="s">"DOP "</span><span class="p">)</span>
<span class="p">);</span>
<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">dollarFuture</span> <span class="k">in</span> <span class="n">dollarFutures</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">dollarFuture</span><span class="p">.</span><span class="n">Symbol</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>La salida de este ejemplo será algo como:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DONov19
DOMar20
DONov19 66.00c
DODic19
DOEne20A
DOJul20
DOMay20A
DONov19 68.00c
DOJun20A
DOJun20
DONov19 60.00p
DOAbr20
DOAgo20
...
</code></pre></div></div>

<h2 id="obteniendo-los-trades-históricos-de-un-instrumento">Obteniendo los trades históricos de un instrumento</h2>

<p>Finalmente, para obtener datos históricos de un instrumento, utilizamos el método <code class="highlighter-rouge">GetHistoricalTrades</code> que devuelve una secuencia de <code class="highlighter-rouge">Trade</code> con la información de cada operación realizada.</p>

<p>Los parámetros son: el instrumento y el intervalo de días para el cual queremos los datos.</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">var</span> <span class="n">sampleInstrument</span> <span class="p">=</span> <span class="n">allIInstruments</span><span class="p">.</span><span class="nf">First</span><span class="p">();</span>
<span class="kt">var</span> <span class="n">threeDaysAgo</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Today</span><span class="p">.</span><span class="nf">AddDays</span><span class="p">(-</span><span class="m">3</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">trade</span> <span class="k">in</span> <span class="k">await</span> <span class="n">api</span><span class="p">.</span><span class="nf">GetHistoricalTrades</span><span class="p">(</span><span class="n">sampleInstrument</span><span class="p">,</span> <span class="n">threeDaysAgo</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">Today</span><span class="p">))</span>
<span class="p">{</span>
	<span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"</span><span class="p">{</span><span class="n">trade</span><span class="p">.</span><span class="n">DateTime</span><span class="p">.</span><span class="nf">ToLocalTime</span><span class="p">()}</span><span class="s">: $</span><span class="p">{</span><span class="n">trade</span><span class="p">.</span><span class="n">Price</span><span class="p">}</span><span class="s"> (</span><span class="p">{</span><span class="n">trade</span><span class="p">.</span><span class="n">Size</span><span class="p">}</span><span class="s">)"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Como la API de Primary devuelve las fechas y horas en UTC, es necesario convertirlos a fecha/hora local.</p>

<p>La salida es:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>11/19/2019 10:30:48 AM: $60.35 (6.0)
11/19/2019 10:32:10 AM: $60.351 (1.0)
11/19/2019 10:59:42 AM: $60.39 (1.0)
11/19/2019 11:31:06 AM: $60.45 (1.0)
11/19/2019 11:34:15 AM: $60.5 (1.0)
11/19/2019 11:35:45 AM: $60.5 (20.0)
11/19/2019 11:43:17 AM: $60.51 (1.0)
11/19/2019 11:43:49 AM: $60.51 (1.0)
11/19/2019 11:48:15 AM: $60.55 (10.0)
11/19/2019 11:48:15 AM: $60.55 (30.0)
11/19/2019 11:48:15 AM: $60.55 (13.0)
11/19/2019 11:48:15 AM: $60.55 (13.0)
11/19/2019 11:49:49 AM: $60.55 (7.0)
11/19/2019 11:49:49 AM: $60.55 (7.0)
11/19/2019 12:01:34 PM: $60.55 (7.0)
...
</code></pre></div></div>

<h1 id="conclusiones">Conclusiones</h1>

<p>Primary.Net provee una forma de acceder a la API de Primary y a los productos de MATba-ROFEX desde C#. Si bien la biblioteca se encuentra todavía en desarrollo, la funcionalidad existente permite que sea utilizada para los casos de uso más comunes.</p>

<p>En futuros artículos iremos desarrollando el resto de la funcionalidad disponible en la biblioteca y ejemplos de como utilizarla para implementar una estrategia de trading.</p>

<p>Pueden encontrar más información de la Primary API en su <a href="http://api.primary.com.ar/">sitio oficial</a>.</p>

<p>Para conocer más acerca de la biblioteca, se puede acceder al <a href="https://github.com/naicigam/Primary.Net/">repositorio de GitHub</a> y a la <a href="https://primary.naicigam.dev/">documentación</a>.</p>
</div>
        <div>Introducción El mercado algorítmico argentino y ROFEX En mercados altamente desarrollados, como el de Estados Unidos, el trading algorítmico viene creciendo exponencialmente en los últimos años. Su desarrollo ha sido notorio, desde...</div>

        <div class="read-more"><a href="/2019/12/18/primary-net-part-1">Read more...</a></div>
      </div>
	
    </div>

</div>

      </div>
    </main>

    <footer class="site-footer h-card">
  <div class="page-wrapper footer-wrapper">
      
      <div class="footer-col col-60w">
        <div class="footer-header--custom">
            <div class="footer-header--custom-underline">Archivo</div>
        </div>
        <div class="footer-items-wrapper">
          

<div class="archive-date">
  <a href="/2019/12/">Dec 2019</a>
  
</div>





        </div>
      </div>
      <div class="footer-col col-40w border-box">
        <div class="footer-header--custom">
            <div class="footer-header--custom-underline">También nos podés encontrar en:</div>
        </div>
        <ul class="social-media-list">
  
  
  
  <li><a href="https://github.com/naicigam"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">naicigam</span></a></li>
  
  
  
  
  <li><a href="https://www.twitter.com/AlvarezJuanDev"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">AlvarezJuanDev</span></a></li>
  
  
  
</ul>
      </div>

  </div>
  <div class="row footer-wrapper footer-wrapper--small">
    <div class="created-by">
      <a href="http://www.fibury.com" target="_blank">
        Powered by Fibury
        <span class="fibury-icon"><img src="/images/fibury-powered.png"></span>
      </a>

    </div>
  </div>

  <!--
  <data class="u-url" href="/"></data>
 

<div class="archive-date">
  <a href="/2019/12/">Dec 2019</a>
  
</div>





  <div class="wrapper">

    <h2 class="footer-heading">Finanzas Codificadas</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">
            
              Juan Manuel Alvarez
            
            </li>
            
            <li><a class="u-email" href="mailto:info@finanzascodificadas.com">info@finanzascodificadas.com</a></li>
            
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
  
  
  
  <li><a href="https://github.com/naicigam"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">naicigam</span></a></li>
  
  
  
  
  <li><a href="https://www.twitter.com/AlvarezJuanDev"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">AlvarezJuanDev</span></a></li>
  
  
  
</ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>
  -->

</footer>



  </body>

</html>